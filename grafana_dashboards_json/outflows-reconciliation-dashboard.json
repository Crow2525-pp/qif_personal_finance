{
  "annotations": {"list": [{"builtIn": 1, "datasource": {"type": "grafana", "uid": "-- Grafana --"}, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "type": "dashboard"}]},
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 0,
  "id": null,
  "links": [],
  "liveNow": false,
  "panels": [
    {"datasource": {"type": "text", "uid": "-- Text --"}, "gridPos": {"h": 3, "w": 24, "x": 0, "y": 0}, "id": 100, "options": {"content": "### Financial Reconciliation\n\nCross-dashboard pass/fail checks (Outflows, Budget, Income/Expense, Cash Flow, Executive, Net Worth). Aim for all PASS. Use tables to triage discrepancies.", "mode": "markdown"}, "title": "Overview", "type": "text"},

    {"datasource": {"type": "postgres", "uid": "PCC52D03280B7034C"}, "fieldConfig": {"defaults": {"mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green"}, {"color": "red", "value": 1}]}}, "overrides": []}, "gridPos": {"h": 3, "w": 6, "x": 0, "y": 3}, "id": 200, "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "orientation": "horizontal", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "/^failed$/", "values": false}, "textMode": "value"}, "targets": [{"datasource": {"type": "postgres", "uid": "PCC52D03280B7034C"}, "editorMode": "code", "format": "table", "rawQuery": true, "rawSql": "SELECT failed FROM reporting.rpt_financials_reconciliation_summary ORDER BY period_date DESC LIMIT 1;", "refId": "A"}], "title": "Failed Checks (All Domains)", "type": "stat"},

    {"datasource": {"type": "postgres", "uid": "PCC52D03280B7034C"}, "fieldConfig": {"defaults": {"mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green"}]}}, "overrides": []}, "gridPos": {"h": 3, "w": 6, "x": 6, "y": 3}, "id": 201, "options": {"colorMode": "value", "graphMode": "none", "justifyMode": "center", "orientation": "horizontal", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "/^status$/", "values": false}, "textMode": "value"}, "targets": [{"datasource": {"type": "postgres", "uid": "PCC52D03280B7034C"}, "editorMode": "code", "format": "table", "rawQuery": true, "rawSql": "SELECT status FROM reporting.rpt_financials_reconciliation_summary ORDER BY period_date DESC LIMIT 1;", "refId": "A"}], "title": "Overall Status (All Domains)", "type": "stat"},

    {"datasource": {"type": "postgres", "uid": "PCC52D03280B7034C"}, "fieldConfig": {"defaults": {"custom": {"align": "auto", "cellOptions": {"type": "auto"}}, "mappings": []}, "overrides": []}, "gridPos": {"h": 4, "w": 12, "x": 12, "y": 3}, "id": 202, "options": {"cellHeight": "sm", "showHeader": true}, "targets": [{"datasource": {"type": "postgres", "uid": "PCC52D03280B7034C"}, "editorMode": "code", "format": "table", "rawQuery": true, "rawSql": "WITH latest AS (SELECT MAX(period_date) AS p FROM reporting.rpt_financials_reconciliation_tests) SELECT domain, COUNT(*) FILTER (WHERE pass) AS passed, COUNT(*) FILTER (WHERE NOT pass) AS failed, COUNT(*) AS total FROM reporting.rpt_financials_reconciliation_tests WHERE period_date = (SELECT p FROM latest) GROUP BY domain ORDER BY domain;", "refId": "A"}], "title": "Domain Summary (Latest)", "type": "table"},

    {"datasource": {"type": "postgres", "uid": "PCC52D03280B7034C"}, "fieldConfig": {"defaults": {"custom": {"align": "auto", "cellOptions": {"type": "auto"}}, "mappings": []}, "overrides": []}, "gridPos": {"h": 8, "w": 24, "x": 0, "y": 7}, "id": 203, "options": {"cellHeight": "sm", "showHeader": true}, "targets": [{"datasource": {"type": "postgres", "uid": "PCC52D03280B7034C"}, "editorMode": "code", "format": "table", "rawQuery": true, "rawSql": "WITH latest AS (SELECT MAX(period_date) AS p FROM reporting.rpt_financials_reconciliation_tests) SELECT period_date, domain, test_name, left_value, right_value, delta, pass, notes FROM reporting.rpt_financials_reconciliation_tests WHERE period_date = (SELECT p FROM latest) ORDER BY domain, test_name;", "refId": "A"}], "title": "Financial Reconciliation Checks (Latest Month)", "type": "table"},

    {"datasource": {"type": "postgres", "uid": "PCC52D03280B7034C"}, "fieldConfig": {"defaults": {"unit": "short"}, "overrides": []}, "gridPos": {"h": 6, "w": 24, "x": 0, "y": 15}, "id": 205, "options": {"legend": {"displayMode": "list", "showLegend": true}, "tooltip": {"mode": "single"}}, "targets": [{"datasource": {"type": "postgres", "uid": "PCC52D03280B7034C"}, "editorMode": "code", "format": "time_series", "rawQuery": true, "rawSql": "SELECT period_date AS time, failed FROM reporting.rpt_financials_reconciliation_summary WHERE period_date >= (DATE_TRUNC('month', CURRENT_DATE) - INTERVAL '12 months') ORDER BY period_date;", "refId": "A"}], "title": "Failed Checks Over Time (All Domains, 12M)", "type": "timeseries"},

    {"datasource": {"type": "postgres", "uid": "PCC52D03280B7034C"}, "fieldConfig": {"defaults": {"custom": {"align": "auto", "cellOptions": {"type": "auto"}}, "mappings": []}, "overrides": []}, "gridPos": {"h": 10, "w": 24, "x": 0, "y": 21}, "id": 204, "options": {"cellHeight": "sm", "showHeader": true}, "targets": [{"datasource": {"type": "postgres", "uid": "PCC52D03280B7034C"}, "editorMode": "code", "format": "table", "rawQuery": true, "rawSql": "SELECT period_date, domain, test_name, left_value, right_value, delta, pass, notes FROM reporting.rpt_financials_reconciliation_tests WHERE period_date >= (DATE_TRUNC('month', CURRENT_DATE) - INTERVAL '6 months') ORDER BY period_date DESC, domain, test_name;", "refId": "A"}], "title": "All Tests (Last 6 Months)", "type": "table"},

    {"datasource": {"type": "postgres", "uid": "PCC52D03280B7034C"}, "fieldConfig": {"defaults": {"custom": {"align": "auto", "cellOptions": {"type": "auto"}}, "mappings": []}, "overrides": [{"matcher": {"id": "byName", "options": "period_date"}, "properties": [{"id": "unit", "value": "time: YYYY-MM"}]}]}, "gridPos": {"h": 4, "w": 12, "x": 0, "y": 31}, "id": 210, "options": {"cellHeight": "sm", "showHeader": true}, "targets": [{"datasource": {"type": "postgres", "uid": "PCC52D03280B7034C"}, "editorMode": "code", "format": "table", "rawQuery": true, "rawSql": "SELECT period_date, status, passed, failed, total FROM reporting.rpt_outflows_reconciliation_summary ORDER BY period_date DESC LIMIT 1;", "refId": "A"}], "title": "Outflows Summary (Latest)", "type": "table"},

    {"datasource": {"type": "postgres", "uid": "PCC52D03280B7034C"}, "fieldConfig": {"defaults": {"custom": {"align": "auto", "cellOptions": {"type": "auto"}}, "mappings": []}, "overrides": []}, "gridPos": {"h": 8, "w": 24, "x": 0, "y": 35}, "id": 211, "options": {"cellHeight": "sm", "showHeader": true}, "targets": [{"datasource": {"type": "postgres", "uid": "PCC52D03280B7034C"}, "editorMode": "code", "format": "table", "rawQuery": true, "rawSql": "WITH latest AS (SELECT MAX(period_date) AS p FROM reporting.rpt_outflows_reconciliation_tests) SELECT period_date, test_name, left_value, right_value, delta, pass, notes FROM reporting.rpt_outflows_reconciliation_tests WHERE period_date = (SELECT p FROM latest) ORDER BY test_name;", "refId": "A"}], "title": "Outflows Checks (Latest Month)", "type": "table"},

    {"datasource": {"type": "postgres", "uid": "PCC52D03280B7034C"}, "fieldConfig": {"defaults": {"custom": {"align": "auto", "cellOptions": {"type": "auto"}}, "mappings": []}, "overrides": [{"matcher": {"id": "byName", "options": "month"}, "properties": [{"id": "custom.width", "value": 100}]}, {"matcher": {"id": "byName", "options": "account_name"}, "properties": [{"id": "custom.width", "value": 160}]}, {"matcher": {"id": "byName", "options": "amount"}, "properties": [{"id": "unit", "value": "currencyUSD"}]}, {"matcher": {"id": "byName", "options": "confidence"}, "properties": [{"id": "unit", "value": "percentunit"}]}]}, "gridPos": {"h": 8, "w": 24, "x": 0, "y": 43}, "id": 212, "options": {"cellHeight": "sm", "showHeader": true}, "targets": [{"datasource": {"type": "postgres", "uid": "PCC52D03280B7034C"}, "editorMode": "code", "format": "table", "rawQuery": true, "rawSql": "WITH data AS (\n  SELECT month, account_name, amount, count, example_transaction, suggested_category, suggested_subcategory, confidence\n  FROM reporting.viz_uncategorized_missing_example_top5\n  ORDER BY amount DESC\n)\nSELECT * FROM data\nUNION ALL\nSELECT 'N/A', 'None', 0, 0, 'No uncategorized transactions'::text, 'N/A', 'N/A', 0\nWHERE NOT EXISTS (SELECT 1 FROM data);", "refId": "A"}], "title": "Top 5 Uncategorized Without Example (High Value)", "type": "table"}

  ],
  "refresh": "",
  "schemaVersion": 38,
  "tags": ["outflows", "reconciliation", "quality"],
  "templating": {"list": []},
  "time": {"from": "now-12M", "to": "now"},
  "timezone": "Australia/Melbourne",
  "title": "Financial Reconciliation Dashboard",
  "uid": "outflows_reconciliation",
  "version": 1,
  "weekStart": ""
}
